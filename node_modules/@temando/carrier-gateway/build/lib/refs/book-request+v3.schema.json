{
  "id": "http://carrier-gateway.temando.com/schema/book-request+v3#",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "description": "The generic booking request schema",
  "type": "object",
  "required": [
    "integrationId",
    "origin",
    "destination",
    "pickupAt",
    "service",
    "packages"
  ],
  "allOf": [{
    "$ref": "http://carrier-gateway.temando.com/schema/generic/identifiable+v1#"
  }, {
    "$ref": "#/definitions/bookingRequest"
  }],
  "definitions": {
    "bookingRequest": {
      "properties": {
        "integrationId": {
          "description": "The identifier of the integration to you want to communicate with",
          "type": "string"
        },
        "origin": {
          "$ref": "http://carrier-gateway.temando.com/schema/generic/address+v2#"
        },
        "destination": {
          "$ref": "http://carrier-gateway.temando.com/schema/generic/address+v2#"
        },
        "exportDeclaration": {
          "$ref": "#/definitions/exportDeclaration"
        },
        "pickupAt": {
          "type": "string",
          "format": "date-time"
        },
        "packages": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "http://carrier-gateway.temando.com/schema/generic/package+v1#"
          }
        },
        "declaredValue": {
          "$ref": "http://carrier-gateway.temando.com/schema/generic/money+v1#"
        },
        "insuredAmount": {
          "$ref": "http://carrier-gateway.temando.com/schema/generic/money+v1#"
        },
        "labelImageFormat": {
          "type": "string",
          "enum": ["EPL", "ZPL", "PDF", "PNG", "JPG"]
        },
        "service": {
          "$ref": "#/definitions/service"
        }
      }
    },
    "service": {
      "type": "object",
      "required": ["name"],
      "properties": {
        "name": {
          "type": "string",
          "description": "A human understandable identifier for a carrier service"
        }
      }
    },
    "exportDeclaration": {
      "type": "object",
      "properties": {
        "signatureName": {
          "description": "Name of signatory",
          "type": "string"
        },
        "signatureTitle": {
          "description": "Title of signatory",
          "type": "string"
        },
        "exportReason": {
          "description": "A human readable description of the reason for the exportation",
          "type": "string"
        },
        "exportReasonCode": {
          "description": "Export reason code",
          "type": "string"
        },
        "eccn": {
          "type": "string",
          "description": "Export Control Classification Number (ECCN)",
          "minLength": 0,
          "maxLength": 5
        }
      }
    }
  }
}
