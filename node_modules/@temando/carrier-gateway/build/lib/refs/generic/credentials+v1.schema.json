{
  "id": "http://carrier-gateway.temando.com/schema/generic/credentials+v1#",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "description": "Integration credentials schema",
  "type": "object",
  "required": ["credentials"],
  "properties": {
    "credentials": {
      "required": ["type"],
      "oneOf": [{
        "$ref": "#/definitions/credentialsBasic"
      },{
        "$ref": "#/definitions/credentialsBasicWithEndpoint"
      }, {
        "$ref": "#/definitions/credentialsFTP"
      }, {
        "$ref": "#/definitions/credentialsDHL"
      }, {
        "$ref": "#/definitions/credentialsSDA"
      }, {
        "$ref": "#/definitions/credentialsPandT"
      }, {
        "$ref": "#/definitions/credentialsUPS"
      }]
    }
  },
  "definitions": {
    "credentialsBasic": {
      "type": "object",
      "allOf": [{
        "$ref": "#/definitions/usernamePasswordAuth"
      }],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["credentialsBasic"]
        }
      }
    },

    "credentialsBasicWithEndpoint": {
      "type": "object",
      "allOf": [{
        "$ref": "#/definitions/usernamePasswordAuthWithEndpoint"
      }],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["credentialsBasicWithEndpoint"]
        }
      }
    },

    "credentialsFTP": {
      "type": "object",
      "allOf": [{
        "$ref": "#/definitions/usernamePasswordAuth"
      }, {
        "$ref": "#/definitions/ftpParameters"
      }],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["credentialsFTP"]
        }
      }
    },

    "credentialsDHL": {
      "type": "object",
      "allOf": [{
        "$ref": "#/definitions/usernamePasswordAuthWithEndpoint"
      }, {
        "$ref": "#/definitions/dhlExtensions"
      }],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["credentialsDHL"]
        }
      }
    },

    "credentialsUPS": {
      "type": "object",
      "allOf": [{
        "$ref": "#/definitions/usernamePasswordAuthWithEndpoint"
      }, {
        "$ref": "#/definitions/upsExtensions"
      }],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["credentialsUPS"]
        }
      }
    },

    "credentialsPandT": {
      "type": "object",
      "allOf": [{
        "$ref": "#/definitions/usernamePasswordAuth"
      }, {
        "$ref": "#/definitions/ftpParameters"
      }, {
        "$ref": "#/definitions/ID4"
      }],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["credentialsPandT"]
        }
      }
    },

    "credentialsSDA": {
      "type": "object",
      "allOf": [{
        "$ref": "#/definitions/usernamePasswordAuth"
      }, {
        "$ref": "#/definitions/ftpParameters"
      }, {
        "$ref": "#/definitions/ID4"
      }, {
        "$ref": "#/definitions/sdaExtensions"
      }],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["credentialsSDA"]
        }
      }
    },

    "apiEndpoint": {
      "type": "object",
      "required": ["endpoint"],
      "properties": {
        "endpoint": {
          "type": "string",
          "format": "uri"
        }
      }
    },

    "ftpParameters": {
      "type": "object",
      "required": [
        "host",
        "path"
      ],
      "properties": {
        "host": {
          "type": "string"
        },
        "path": {
          "type": "string"
        },
        "port": {
          "description": "port to connnect to server",
          "type": "number"
        },
        "secure": {
          "type": "boolean",
          "description": "Determine if the connection is secure ftp or ftp"
        }
      }
    },

    "ID4": {
      "type": "object",
      "required": ["ID4"],
      "properties": {
        "ID4": {
          "description": "A client specific four character code",
          "type": "string",
          "minLength": 4,
          "maxLength": 6
        }
      }
    },

    "usernamePasswordAuth": {
      "type": "object",
      "required": [
        "username", "password"
      ],
      "properties": {
        "username": {
          "description": "An account username",
          "type": "string"
        },
        "password": {
          "description": "A password associated with the account",
          "type": "string"
        }
      }
    },

    "usernamePasswordAuthWithEndpoint": {
      "type": "object",
      "required": [
        "username", "password"
      ],
      "properties": {
        "username": {
          "description": "An account username",
          "type": "string"
        },
        "password": {
          "description": "A password associated with the account",
          "type": "string"
        }
      },
      "allOf": [{
        "$ref": "#/definitions/apiEndpoint"
      }]
    },

    "dhlExtensions": {
      "type": "object",
      "required": ["accountNumber", "shippingPaymentType", "dutyPaymentType", "currencyCode"],
      "properties": {
        "accountNumber": {
          "description": "The DHL Account Number Associated with the site id",
          "type": "number",
          "minimum": 100000000,
          "maximum": 999999999999
        },
        "shippingPaymentType": {
          "description": "Shipment payment type (S:Shipper,R:Recipient,T:Third Party)",
          "type": "string",
          "enum": ["S", "R", "T"]
        },
        "billingAccountNumber": {
          "description": "The DHL Account Number used for billing, only required if shipping payment type is set to T",
          "type": "number",
          "minimum": 100000000,
          "maximum": 999999999999
        },
        "dutyPaymentType": {
          "type": "string",
          "enum": ["S", "R", "T"]
        },
        "dutyAccountNumber": {
          "description": "The DutyAccountNumber element contains the DHL Account Number which is used in duty and tax payment.",
          "type": "number",
          "minimum": 100000000,
          "maximum": 999999999999
        },
        "currencyCode": {
          "description": "The currency shipments are billed in",
          "type": "string",
          "minLength": 3,
          "maxLength": 3
        },
        "isPaperlessAccount": {
          "description": "The configuration for paperless account",
          "type": "boolean"
        }
      }
    },

    "upsExtensions": {
      "type": "object",
      "required": ["accessLicenseNumber", "accountNumber", "shipperAddress"],
      "properties": {
        "accessLicenseNumber": {
          "type": "string"
        },
        "accountNumber": {
          "type": "string",
          "description": "A client UPS account number"
        },
        "shipperAddress": {
          "required": ["contactName", "primaryPhoneNumber", "addressLine", "countryCode", "postalCode"],
          "allOf": [{
            "$ref": "http://carrier-gateway.temando.com/schema/generic/address+v3#"
          }]
        }
      }
    },

    "sdaExtensions": {
      "type": "object",
      "required": ["clientCode"],
      "properties": {
        "clientCode": {
          "type": "string",
          "minLength": 12,
          "maxLength": 12
        }
      }
    }
  }
}
