{
  "id": "http://carrier-gateway.temando.com/schema/generic/credentials+v2#",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "description": "Integration credentials schema",
  "type": "object",
  "required": ["credentials"],
  "properties": {
    "credentials": {
      "required": ["type"],
      "oneOf": [{
        "$ref": "#/definitions/credentialsBasic"
      },{
        "$ref": "#/definitions/credentialsBasicWithEndpoint"
      }, {
        "$ref": "#/definitions/credentialsFTP"
      }, {
        "$ref": "#/definitions/credentialsDHL"
      }, {
        "$ref": "#/definitions/credentialsDHLECommerce"
      }, {
        "$ref": "#/definitions/credentialsSDA"
      }, {
        "$ref": "#/definitions/credentialsPandT"
      }, {
        "$ref": "#/definitions/credentialsUPS"
      }, {
        "$ref": "#/definitions/credentialsExpress1"
      }, {
        "$ref": "#/definitions/credentialsAusPost"
      }, {
        "$ref": "#/definitions/credentialsFedex"
      }, {
        "$ref": "#/definitions/credentialsParcelForce"
      }]
    }
  },
  "definitions": {
    "credentialsBasic": {
      "type": "object",
      "allOf": [{
        "$ref": "#/definitions/usernamePasswordAuth"
      }],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["credentialsBasic"]
        }
      }
    },

    "credentialsBasicWithEndpoint": {
      "type": "object",
      "allOf": [{
        "$ref": "#/definitions/usernamePasswordAuthWithEndpoint"
      }],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["credentialsBasicWithEndpoint"]
        }
      }
    },

    "credentialsFTP": {
      "type": "object",
      "allOf": [{
        "$ref": "#/definitions/usernamePasswordAuth"
      }, {
        "$ref": "#/definitions/ftpParameters"
      }],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["credentialsFTP"]
        }
      }
    },

    "credentialsDHL": {
      "type": "object",
      "allOf": [{
        "$ref": "#/definitions/usernamePasswordAuthWithEndpoint"
      }, {
        "$ref": "#/definitions/dhlExtensions"
      }],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["credentialsDHL"]
        }
      }
    },

    "credentialsDHLECommerce": {
      "type": "object",
      "allOf": [{
        "$ref": "#/definitions/usernamePasswordAuthWithEndpoint"
      }, {
        "$ref": "#/definitions/dhlECommerceExtensions"
      }],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["credentialsDHLECommerce"]
        }
      }
    },

    "credentialsUPS": {
      "type": "object",
      "allOf": [{
        "$ref": "#/definitions/usernamePasswordAuthWithEndpoint"
      }, {
        "$ref": "#/definitions/upsExtensions"
      }],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["credentialsUPS"]
        }
      }
    },

    "credentialsExpress1": {
      "type": "object",
      "allOf": [{
        "$ref": "#/definitions/usernamePasswordAuthWithEndpoint"
      }, {
        "$ref": "#/definitions/express1Extensions"
      }],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["credentialsExpress1"]
        }
      }
    },

    "credentialsPandT": {
      "type": "object",
      "allOf": [{
        "$ref": "#/definitions/usernamePasswordAuth"
      }, {
        "$ref": "#/definitions/ftpParameters"
      }, {
        "$ref": "#/definitions/ID4"
      }],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["credentialsPandT"]
        }
      }
    },

    "credentialsSDA": {
      "type": "object",
      "allOf": [{
        "$ref": "#/definitions/usernamePasswordAuth"
      }, {
        "$ref": "#/definitions/ftpParameters"
      }, {
        "$ref": "#/definitions/ID4"
      }, {
        "$ref": "#/definitions/sdaExtensions"
      }],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["credentialsSDA"]
        }
      }
    },

    "credentialsAusPost": {
      "type": "object",
      "allOf": [{
        "$ref": "#/definitions/usernamePasswordAuthWithEndpoint"
      }, {
        "$ref": "#/definitions/ausPostExtensions"
      }],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["credentialsAusPost"]
        }
      }
    },

    "credentialsFedex": {
      "type": "object",
      "allOf": [{
        "$ref": "#/definitions/usernamePasswordAuthWithEndpoint"
      }, {
        "$ref": "#/definitions/fedexExtensions"
      }],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["credentialsFedex"]
        }
      }
    },
    "credentialsWnDirect": {
      "type": "object",
      "allOf": [{
        "$ref": "#/definitions/usernamePasswordAuth"
      }, {
        "$ref": "#/definitions/ftpParameters"
      }, {
        "$ref": "#/definitions/ID4"
      }, {
        "$ref": "#/definitions/wnDirectExtensions"
      }],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["credentialsWnDirect"]
        }
      }
    },

    "credentialsParcelForce": {
      "type": "object",
      "allOf": [{
        "$ref": "#/definitions/usernamePasswordAuthWithEndpoint"
      }, {
        "$ref": "#/definitions/parcelForceExtensions"
      }],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["credentialsParcelForce"]
        }
      }
    },

    "apiEndpoint": {
      "type": "object",
      "required": ["endpoint"],
      "properties": {
        "endpoint": {
          "type": "string",
          "format": "uri"
        }
      }
    },

    "ftpParameters": {
      "type": "object",
      "required": [
        "host",
        "path"
      ],
      "properties": {
        "host": {
          "type": "string"
        },
        "path": {
          "type": "string"
        },
        "port": {
          "description": "port to connnect to server",
          "type": "number"
        },
        "secure": {
          "type": "boolean",
          "description": "Determine if the connection is secure ftp or ftp"
        }
      }
    },

    "ID4": {
      "type": "object",
      "required": ["ID4"],
      "properties": {
        "ID4": {
          "description": "A client specific four character code",
          "type": "string",
          "minLength": 4,
          "maxLength": 4
        }
      }
    },

    "usernamePasswordAuth": {
      "type": "object",
      "required": [
        "username", "password"
      ],
      "properties": {
        "username": {
          "description": "An account username",
          "type": "string"
        },
        "password": {
          "description": "A password associated with the account",
          "type": "string"
        }
      }
    },

    "usernamePasswordAuthWithEndpoint": {
      "type": "object",
      "required": [
        "username", "password"
      ],
      "properties": {
        "username": {
          "description": "An account username",
          "type": "string"
        },
        "password": {
          "description": "A password associated with the account",
          "type": "string"
        }
      },
      "allOf": [{
        "$ref": "#/definitions/apiEndpoint"
      }]
    },

    "dhlExtensions": {
      "type": "object",
      "required": ["accountNumber", "shippingPaymentType", "dutyPaymentType", "currencyCode"],
      "properties": {
        "accountNumber": {
          "description": "The DHL Account Number Associated with the site id",
          "type": "number",
          "minimum": 100000000,
          "maximum": 999999999999
        },
        "shippingPaymentType": {
          "description": "Shipment payment type (S:Shipper,R:Recipient,T:Third Party)",
          "type": "string",
          "enum": ["S", "R", "T"]
        },
        "billingAccountNumber": {
          "description": "The DHL Account Number used for billing, only required if shipping payment type is set to T",
          "type": "number",
          "minimum": 100000000,
          "maximum": 999999999999
        },
        "dutyPaymentType": {
          "type": "string",
          "enum": ["S", "R", "T"]
        },
        "dutyAccountNumber": {
          "description": "The DutyAccountNumber element contains the DHL Account Number which is used in duty and tax payment.",
          "type": "number",
          "minimum": 100000000,
          "maximum": 999999999999
        },
        "currencyCode": {
          "description": "The currency shipments are billed in",
          "type": "string",
          "minLength": 3,
          "maxLength": 3
        },
        "paperless": {
          "description": "The configuration for paperless",
          "type": "boolean"
        }
      }
    },

    "dhlECommerceExtensions": {
      "type": "object",
      "required": [
        "clientId"
      ],
      "properties": {
        "clientId": {
          "description": "A DHL eCommerce Client ID",
          "type": "integer"
        }
      }
    },

    "upsExtensions": {
      "type": "object",
      "required": ["accessLicenseNumber", "accountNumber", "accountHolder"],
      "properties": {
        "accessLicenseNumber": {
          "type": "string"
        },
        "accountNumber": {
          "type": "string",
          "description": "A client UPS account number"
        },
        "accountHolder": {
          "description": "The account holder address and contact details",
          "required": [
            "addressLines",
            "countryCode",
            "postalCode",
            "contact"
          ],
          "allOf": [{
            "$ref": "http://carrier-gateway.temando.com/schema/generic/address+v4#"
          }]
        }
      }
    },

    "express1Extensions": {
      "type": "object",
      "required": ["requesterId"],
      "properties": {
        "requesterId": {
          "type": "string",
          "minLength": 1
        },
        "licenseNumber": {
          "description": "USPS license number",
          "type": "string",
          "minLength": 1
        }
      }
    },

    "sdaExtensions": {
      "type": "object",
      "required": ["clientCode"],
      "properties": {
        "clientCode": {
          "type": "string",
          "minLength": 12,
          "maxLength": 12
        }
      }
    },

    "wnDirectExtensions": {
      "type": "object",
      "required": ["clientCode","clientPrefix","clientNumber"],
      "properties": {
        "clientCode": {
          "type": "string",
          "minLength": 10,
          "maxLength": 10
        },
        "clientPrefix": {
          "type": "string",
          "minLength": 2,
          "maxLength": 3
        },
         "clientNumber": {
          "type": "string",
          "minLength": 2,
          "maxLength": 10
        }
      }
    },

    "ausPostExtensions": {
      "type": "object",
      "required": [
        "accountNumber"
      ],
      "properties": {
        "accountNumber": {
          "description": "The Australia Post Account Number",
          "type": "string"
        }
      }
    },

    "parcelForceExtensions": {
      "type": "object",
      "required": [
        "departmentId"
      ],
      "properties": {
        "departmentId": {
          "description": "The Parcel Force DepartmentId",
          "type": "string"
        }
      }
    },

    "fedexExtensions": {
      "type": "object",
      "required": [
        "accountNumber",
        "meterNumber"
      ],
      "properties": {
        "accountNumber": {
          "description": "A Fedex Account Number",
          "type": "string"
        },
        "meterNumber": {
          "description": "A Fedex Meter Number",
          "type": "string"
        }
      }
    }
  }
}
