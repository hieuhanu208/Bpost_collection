{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "id": "http://carrier-gateway.temando.com/schema/generic/shipment+v2#",
  "description": "This is the schema for representing a shipment. It is primarily used for quoting and initiating a booking with a carrier.",
  "type": "object",
  "properties": {
    "shipment": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "origin",
        "destination",
        "packages"
      ],
      "properties": {
        "integrationServiceId": {
          "$ref": "#/definitions/integrationServiceId"
        },
        "integrationServiceIds": {
          "description": "An array of service identifiers to quote for",
          "type": "array",
          "items": [
            {
              "$ref": "#/definitions/integrationServiceId"
            }
          ]
        },
        "customerReference": {
          "description": "A consistent identifier that represents a clients customer",
          "type": "string"
        },
        "isDutiable": {
          "description": "A boolean indicating whether this shipment is dutible or not",
          "type": "boolean"
        },
        "pickupAt": {
          "description": "The expected pickup time",
          "type": "string",
          "format": "date-time"
        },
        "expectedAt": {
          "description": "An expected delivery date-time",
          "type": "string",
          "format": "date-time"
        },
        "purchaseOrderNumber": {
          "description": "The associated purchase order number for this shipment",
          "type": "string",
          "minLength": 1
        },
        "descriptionOfGoods": {
          "description": "A human understandable description of the goods being shipped",
          "type": "string",
          "minLength": 1
        },
        "invoiceId": {
          "description": "A related internal invoice id to identify with this shipment",
          "type": "string",
          "minLength": 1
        },
        "invoiceDate": {
          "description": "The date the invoice was generated",
          "type": "string",
          "format": "date-time"
        },
        "origin": {
          "oneOf": [
            {
              "$ref": "http://carrier-gateway.temando.com/schema/generic/address+v4#"
            },
            {
              "$ref": "http://carrier-gateway.temando.com/schema/generic/collection-point+v2#"
            }
          ]
        },
        "destination": {
          "oneOf": [
            {
              "$ref": "http://carrier-gateway.temando.com/schema/generic/address+v4#"
            },
            {
              "$ref": "http://carrier-gateway.temando.com/schema/generic/collection-point+v2#"
            }
          ]
        },
        "finalRecipient": {
          "$ref": "http://carrier-gateway.temando.com/schema/generic/address+v4#"
        },
        "packages": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "http://carrier-gateway.temando.com/schema/generic/package+v3#"
          }
        },
        "exportDeclaration": {
          "$ref": "#/definitions/exportDeclaration"
        },
        "insuredAmount": {
          "$ref": "http://carrier-gateway.temando.com/schema/generic/money+v1#"
        },
        "instructionsToDeliveryAgent": {
          "type": "string"
        },
        "requiredCapabilities": {
          "$ref": "http://carrier-gateway.temando.com/schema/generic/capability+v2#"
        },
        "internalTransactionId": {
          "description": "The internal transaction identifier of the shipper for this order",
          "type": "string"
        },
        "nonDeliveryOption": {
          "description": "What the shipper should do in case the shipment could not be delivered in person",
          "type": "string",
          "enum": [
            "return",
            "abandon"
          ]
        }
      }
    }
  },
  "definitions": {
    "integrationServiceId": {
      "description": "A consistent identifier that represents a unique carrier service to ship with",
      "type": "string",
      "minLength": 1
    },
    "exportDeclaration": {
      "type": "object",
      "properties": {
        "signatory": {
          "description": "The signatory on a shipments' export declaration",
          "allOf": [
            {
              "$ref": "http://carrier-gateway.temando.com/schema/generic/entity+v1#"
            }
          ],
          "required": [
            "person"
          ],
          "properties": {
            "person": {
              "type": "object",
              "required": [
                "first",
                "last",
                "title"
              ]
            }
          }
        },
        "exportDeclarationNumber": {
          "description": "An export declaration number (EDN) associated with the shipment",
          "type": "string"
        },
        "electronicExportInformation": {
          "description": "Electronic Export Information (EEI), formerly known as Shipperâ€™s Export Declaration (SED), for exports originating from the United States",
          "type": "string"
        },
        "exportReason": {
          "description": "A human readable description of the reason for the exportation",
          "type": "string"
        },
        "exportCategory": {
          "description": "A broad classification of the export reason",
          "type": "string",
          "enum": [
            "commercial",
            "documents",
            "gift",
            "humanitarian",
            "non-sold",
            "other",
            "relocation",
            "return-and-repair",
            "sample"
          ]
        },
        "declaredValue": {
          "$ref": "http://carrier-gateway.temando.com/schema/generic/money+v1#"
        },
        "incoterm": {
          "description": "Incoterm 2010 rules, series of pre-defined commercial terms.",
          "enum": [
            "EXW",
            "FCA",
            "FAS",
            "FOB",
            "CPT",
            "CFR",
            "CIF",
            "CIP",
            "DAT",
            "DAP",
            "DDP"
          ]
        },
        "restrictedExportType": {
          "description": "A category of restricted export type",
          "type": "string",
          "enum": [
            "none",
            "other",
            "quarantine",
            "dangerousGoods",
            "sanitary"
          ]
        },
        "senderCustomsReference": {
          "description": "The customs reference of the shipment sender",
          "type": "string",
          "minLength": 1
        },
        "importerCustomsReference": {
          "description": "The customs reference of the shipment reciever",
          "type": "string",
          "minLength": 1
        },
        "senderTaxId": {
          "description": "The tax identification number of the sender",
          "type": "string",
          "minLength": 1
        },
        "importerTaxId": {
          "description": "The tax identification number of the reciever",
          "type": "string",
          "minLength": 1
        },
        "eelCode": {
          "description": "A valid Exemption of Exclusion Legend code",
          "type": "string",
          "minLength": 1
        },
        "pfcReference": {
          "description": "A Proof of Filing Citation reference",
          "type": "string",
          "minLength": 1
        },
        "blanketPeriodBegin": {
          "description": "Start date-time of the blanket period on a certificate of origin",
          "type": "string",
          "format": "date-time"
        },
        "blanketPeriodEnd": {
          "description": "End date-time of the blanket period on a certificate of origin",
          "type": "string",
          "format": "date-time"
        }
      }
    }
  }
}
