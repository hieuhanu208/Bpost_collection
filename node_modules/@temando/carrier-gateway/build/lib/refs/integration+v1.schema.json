{
  "id": "http://carrier-gateway.temando.com/schema/integration+v1#",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "description": "An integration, and the methods it supports",
  "type": "object",
  "required": ["id", "description", "methods"],
  "additionalFields": false,
  "properties": {
    "id": {
      "description": "A consistent identifier to a particular integration",
      "type": "string"
    },
    "description": {
      "description": "A human friendly explanation of the integration",
      "type": "string"
    },
    "methods": {
      "description": "A list of methods the integration can support, showing which ones are supported, and which ones are not",
      "type": "object",
      "required": ["quote", "book", "manifest", "track"],
      "additionalFields": false,
      "properties": {
        "quote": { "$ref": "#/definitions/supportedMethod" },
        "book": { "$ref": "#/definitions/supportedMethod" },
        "manifest": { "$ref": "#/definitions/supportedMethod" },
        "track": { "$ref": "#/definitions/supportedMethod" },
        "example": { "$ref": "#/definitions/supportedMethod" }
      }
    }
  },
  "definitions": {
    "supportedMethod": {
      "description": "If the integration does not support a method, it must be set to null",
      "oneOf": [
        { "$ref": "#/definitions/method" },
        { "type": "null" }
      ]
    },
    "method": {
      "description": "The request and response schemas the method accepts",
      "type": "object",
      "required": ["requestSchemas", "responseSchemas"],
      "additionalFields": false,
      "properties": {
        "requestSchemas": {
          "type": "array",
          "minItems": 1,
          "items": { "type": "string" }
        },
        "responseSchemas": {
          "type": "array",
          "minItems": 1,
          "items": { "type": "string" }
        }
      }
    }
  }
}
