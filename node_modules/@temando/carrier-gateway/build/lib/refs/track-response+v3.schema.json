{
  "id": "http://carrier-gateway.temando.com/schema/track-response+v3#",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "description": "The generic tracking response schema",
  "additionalProperties": false,
  "allOf": [
    {
      "$ref": "http://carrier-gateway.temando.com/schema/generic/identifiable+v1#"
    }
  ],
  "required": [
    "pickedUp",
    "delivered",
    "shipmentEvents",
    "packageEvents"
  ],
  "properties": {
    "id": {
      "description": "A unique identifier for the schema of this request"
    },
    "integrationId": {
      "description": "The id of the integration you wish to talk to"
    },
    "createdAt": {
      "description": "The time the client sent this request to gateway"
    },
    "pickedUp": {
      "type": "boolean",
      "description": "A boolean indicating wheather the shipment has been picked up"
    },
    "delivered": {
      "type": "boolean",
      "description": "A boolean indicating whether the shipment has been delivered"
    },
    "pickedUpAt": {
      "type": "string",
      "format": "date-time",
      "description": "The timestamp at which the shipment was picked up"
    },
    "deliveredAt": {
      "type": "string",
      "format": "date-time",
      "description": "The timestamp at which the shipment was delivered"
    },
    "shipmentEvents": {
      "description": "An array of tracking events associated with this shipment",
      "type": "array",
      "minItems": 0,
      "items": {
        "$ref": "#/definitions/trackingEvent"
      }
    },
    "packageEvents": {
      "description": "An array of tracking events associated with the packages within this shipment",
      "type": "array",
      "minItems": 0,
      "items": {
        "$ref": "#/definitions/trackingEvent"
      }
    }
  },
  "definitions": {
    "trackingEvent": {
      "type": "object",
      "description": "A tracking event and all associated data relating directly to it.",
      "required": [
        "trackingReference",
        "status",
        "rawStatus",
        "occurredAt"
      ],
      "properties": {
        "trackingReference": {
          "type": "string",
          "description": "The reference containing tracking events",
          "minLength": 1
        },
        "status": {
          "enum": [
            null,
            "at waypoint",
            "attempted delivery (card left)",
            "attempted delivery",
            "attempted pick up",
            "awaiting collection",
            "awaiting delivery",
            "awaiting pickup",
            "cancelled",
            "collected",
            "delayed",
            "delivered (unattended)",
            "delivered",
            "expired parcel collected by courier",
            "expired parcel",
            "expired reservation",
            "in transit",
            "issue occurred",
            "on board for delivery",
            "picked up",
            "returned to sender"
          ],
          "description": "The normalised tracking status which may be null if the raw status is not mapped"
        },
        "rawStatus": {
          "type": "string",
          "description": "The raw tracking status",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "description": "A description of the tracking event. E.g. Delivered by John Doe."
        },
        "occurredAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp at which the tracking event occurred"
        },
        "location": {
          "$ref": "http://carrier-gateway.temando.com/schema/generic/address+v4#",
          "required": [
            "postalCode"
          ]
        },
        "signatory": {
          "description": "The name of the signee. E.g. Signature required service",
          "$ref": "http://carrier-gateway.temando.com/schema/generic/entity+v1#",
          "required": [
            "person"
          ]
        },
        "documents": {
          "description": "An array of documentation pertaining to the tracking of this shipment",
          "type": "array",
          "items": {
            "$ref": "http://carrier-gateway.temando.com/schema/generic/document-response+v1#"
          }
        }
      }
    }
  }
}
