{
  "meta": {
    "description": "Sample Marco form response. Covers all possible functionalities and besides that functionally makes no sense"
  },
  "form": {
    "id": "carrierActivation",
    "title": {
      "messageKey": "form.carrier.activation.title"
    },
    "controlSets": [
      {
        "id": "carrierInfoGroup",
        "title": {
          "messageKey": "carrier.service.carrierInfoGroup.label"
        },
        "description": {
          "messageKey": "carrier.service.carrierInfoGroup.description"
        },
        "controls": [
          {
            "id": "id",
            "ref": "#/id",
            "type": "hidden"
          },
          {
            "id": "originCountry",
            "ref": "#/originCountry",
            "type": "dropdown",
            "title": {
              "messageKey": "originCountry.label"
            },
            "dataSource": {
              "trigger": {
                "event": "onload"
              },
              "httpRequest": {
                "url": "https://example.com/countries",
                "method": "GET"
              }
            }
          },
          {
            "id": "originState",
            "ref": "#/originState",
            "type": "dropdown",
            "visibility": {
              "controlId": "originCountry",
              "value": true
            },
            "title": {
              "messageKey": "form.originState.label"
            },
            "dataSource": {
              "trigger": {
                "controlId": "originCountry",
                "event": "onchange"
              },
              "httpRequest": {
                "url": "https://example.com/countryStates",
                "method": "GET"
              }
            }
          },
          {
            "id": "destinationCountry",
            "ref": "#/destinationCountry",
            "type": "dropdown",
            "title": {
              "messageKey": "form.destinationCountry.label"
            },
            "dataSource": {
              "trigger": {
                "event": "onload"
              },
              "httpRequest": {
                "url": "https://example.com/countries",
                "method": "GET"
              }
            }
          },
          {
            "id": "clientDescription",
            "ref": "#/clientDescription",
            "type": "textarea",
            "title": {
              "messageKey": "form.clientDescription.label"
            }
          },
          {
            "id": "password",
            "ref": "#/password",
            "type": "password",
            "title": {
              "messageKey": "form.password.label"
            },
            "uiMeta": {
              "short": true
            }
          },
          {
            "id": "confirmPassword",
            "type": "password",
            "title": {
              "messageKey": "form.confirmPassword.label"
            },
            "uiMeta": {
              "short": true
            },
            "validation": [
              {
                "rule": "mustMatch",
                "matchControlId": "password",
                "messages": {
                  "notMatching": {
                    "messageKey": "form.common.password.mustMatch"
                  }
                }
              }
            ]
          },
          {
            "id": "user.email",
            "ref": "#/use/email",
            "type": "text",
            "title": {
              "messageKey": "form.email.label"
            }
          },
          {
            "id": "orderDate",
            "ref": "#/orderDate",
            "type": "date",
            "title": {
              "messageKey": "form.orderDate.label"
            }
          },
          {
            "id": "deliveryDate",
            "ref": "#/deliveryDate",
            "type": "date",
            "title": {
              "messageKey": "form.deliveryDate.label"
            }
          },
          {
            "id": "deliveryDateTime",
            "ref": "#/deliveryDateTime",
            "type": "datetime",
            "title": {
              "messageKey": "form.deliveryDateTime.label"
            }
          },
          {
            "id": "creditCard.expiryYear",
            "ref": "#/creditCard/expiryYear",
            "type": "date",
            "title": {
              "messageKey": "form.creditCardExpiryDate.label"
            }
          },
          {
            "id": "merchant.numberOfShipments",
            "ref": "#/numberOfShipments",
            "type": "number",
            "title": {
              "messageKey": "form.numberOfShipments.label"
            },
            "uiMeta": {
              "short": true
            },
            "validation": [
              {
                "rule": "number",
                "greaterThan": 0,
                "messages": {
                  "greaterThan": {
                    "messageKey": "form.number.mustBeGreaterThan"
                  }
                }
              }
            ]
          },
          {
            "id": "billingAddressDifferentToShipping",
            "type": "choice",
            "title": {
              "messageKey": "form.billingAddress.differentToShipping.label"
            },
            "value": "billingAddressDifferentToShipping"
          }
        ]
      },
      {
        "id": "billingAddress.group",
        "title": {
          "messageKey": "form.billingAddressGroup.label"
        },
        "description": {
          "messageKey": "form.billingAddressGroup.description"
        },
        "visibility": {
          "controlId": "billingAddressDifferentToShipping",
          "value": true
        },
        "controls": [
          {
            "id": "billingAddress.fullName",
            "ref": "#/billingAddress/fullName",
            "type": "text",
            "title": {
              "messageKey": "form.fullName.label"
            }
          },
          {
            "id": "billingAddress.addressLine1",
            "ref": "#/billingAddress/addressLine1",
            "type": "text",
            "title": {
              "messageKey": "form.billingAddress.addressLine1.label"
            },
            "helpText": {
              "messageKey": "carrier.billingAddress.addressLine1.helpText"
            }
          },
          {
            "id": "billingAddress.addressLine2",
            "ref": "#/billingAddress/addressLine2",
            "type": "text",
            "title": {
              "messageKey": "form.billingAddress.addressLine2.label"
            },
            "helpText": {
              "messageKey": "carrier.billingAddress.addressLine2.helpText"
            }
          },
          {
            "id": "billingAddress.city",
            "ref": "#/billingAddress/city",
            "type": "text",
            "title": {
              "messageKey": "form.billingAddress.city.label"
            }
          },
          {
            "id": "billingAddress.stateProvinceRegion.freeText",
            "ref": "#/billingAddress/state",
            "type": "text",
            "title": {
              "messageKey": "form.billingAddress.stateProvinceRegion.label"
            },
            "visibility": {
              "controlId": "billingAddress.originCountry",
              "valueNotIn": ["AU", "US"]
            }
          },
          {
            "id": "billingAddress.stateProvinceRegion.usStates",
            "ref": "#/billingAddress/state",
            "type": "dropdown",
            "title": {
              "messageKey": "form.billingAddress.stateProvinceRegion.label"
            },
            "visibility": {
              "controlId": "billingAddress.originCountry",
              "value": "US"
            },
            "options": [
              {
                "title": {
                  "messageKey": "common.usStates.ca"
                },
                "value": "CA"
              },
              {
                "title": {
                  "messageKey": "common.usStates.ny"
                },
                "value": "NY"
              },
              {
                "title": {
                  "messageKey": "common.usStates.wa"
                },
                "value": "WA"
              }
            ]
          },
          {
            "id": "billingAddress.stateProvinceRegion.auStates",
            "ref": "#/billingAddress/state",
            "type": "dropdown",
            "title": {
              "messageKey": "form.billingAddress.stateProvinceRegion.label"
            },
            "visibility": {
              "controlId": "billingAddress.originCountry",
              "value": "AU"
            },
            "options": [
              {
                "title": {
                  "messageKey": "common.auStates.qld"
                },
                "value": "QLD"
              },
              {
                "title": {
                  "messageKey": "common.auStates.nsw"
                },
                "value": "NSW"
              },
              {
                "title": {
                  "messageKey": "common.auStates.vic"
                },
                "value": "VIC"
              }
            ]
          },
          {
            "id": "billingAddress.zip",
            "ref": "#/billingAddress/zip",
            "type": "text",
            "title": {
              "messageKey": "form.billingAddress.zipcode.label"
            },
            "uiMeta": {
              "short": true
            }
          },
          {
            "id": "billingAddress.originCountry",
            "ref": "#/billingAddress/originCountry",
            "type": "dropdown",
            "title": {
              "messageKey": "form.billingAddress.originCountry.label"
            },
            "dataSource": {
              "trigger": {
                "event": "onload"
              },
              "httpRequest": {
                "url": "https://example.com/countries",
                "method": "GET"
              }
            }
          },
          {
            "id": "billingAddress.phone",
            "ref": "#/billingAddress/phone",
            "type": "text",
            "title": {
              "messageKey": "form.phone.label"
            }
          },
          {
            "id": "form.create-australia-post.api.industry",
            "ref": "#/industry",
            "type": "dropdown",
            "title": {
              "messageKey": "ui.common.industry.title"
            },
            "dataSource": {
              "trigger": {
                "event": "onload"
              },
              "httpRequest": {
                "url": "https://example.com/industry",
                "method": "GET"
              }
            }
          },
          {
            "id": "declaredValue",
            "type": "infoText",
            "title": {
              "messageKey": "intlItemDetails.declaredValue"
            },
            "defaultValue": {
              "stateRef": "#/orderShip/thisItem",
              "transforms": [
                {
                  "type": "changeShape",
                  "values": [
                    {
                      "input": "#/value",
                      "output": "#/value"
                    },
                    {
                      "input": "#/valueCurrency",
                      "output": "#/currency"
                    }
                  ]
                },
                {
                  "type": "formatCurrency"
                }
              ]
            }
          },
          {
            "id": "deliveryAddressType",
            "ref": "#/data/attributes/origin/address/isOrganisation",
            "type": "dropdown",
            "title": {
              "messageKey": "preShippingMethods.deliveryAddressType"
            },
            "defaultValue": {
              "static": false
            },
            "options": [
              {
                "title": {
                  "messageKey": "deliveryAddressType.residential"
                },
                "value": false
              },
              {
                "title": {
                  "messageKey": "deliveryAddressType.business"
                },
                "value": true
              }
            ]
          },
          {
            "id": "termsAndConditions",
            "type": "infoText",
            "title": {
              "messageKey": "form.termsAndConditions.label"
            },
            "printable": true,
            "dataSource": {
              "trigger": {
                "event": "onload"
              },
              "httpRequest": {
                "url": "https://example.com/{country}/termsAndConditions",
                "method": "GET",
                "headers": [
                  {
                    "header": "Accept-Language",
                    "stateRef": "#/session/lang"
                  },
                  {
                    "header": "Accept",
                    "value": "application/vnd.api+json"
                  },
                  {
                    "header": "Content-Type",
                    "value": "application/vnd.api+json"
                  }
                ],
                "urlParams": [
                  {
                    "param": "country",
                    "stateRef": "#/forms/carrierActivation/valuesByControlId/originCountry"
                  }
                ]
              },
              "responseRoot": "#/data/countries"
            }
          }
        ]
      }
    ],
    "httpRequest": {
      "url": "https://example.com/forms-endpoint",
      "method": "POST",
      "requestData": [
        {
          "ref": "#/type",
          "type": "value",
          "value": "carrier-activation"
        },
        {
          "ref": "#/ip",
          "type": "stateRef",
          "stateRef": "#/session/ipAddress"
        }
      ]
    }
  }
}
