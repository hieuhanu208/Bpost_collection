{
  "id": "https://app.temando.com/schema/generic/workflow/condition+v1#",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "oneOf": [
    { "$ref": "#/definitions/condition" },
    { "$ref": "#/definitions/conditionAnd" },
    { "$ref": "#/definitions/conditionOr" }
  ],
  "definitions": {
    "condition": {
      "type": "object",
      "additionalProperties": false,
      "required": ["leftOperand", "operator", "rightOperand"],
      "properties": {
        "leftOperand": {
          "$ref": "https://app.temando.com/schemas/generic/value+v1#"
        },
        "operator": {
          "type": "string",
          "enum": ["equal", "notEqual", "greaterThan", "greaterThanOrEqual", "lessThan", "lessThanOrEqual", "in", "notIn"]
        },
        "rightOperand": {
          "$ref": "https://app.temando.com/schemas/generic/value+v1#"
        }
      }
    },
    "conditionAnd": {
      "type": "object",
      "additionalProperties": false,
      "required": ["and"],
      "properties": {
        "and": {
          "type": "array",
          "minItems": 2,
          "items": {
            "$ref": "#/definitions/condition"
          }
        }
      }
    },
    "conditionOr": {
      "type": "object",
      "additionalProperties": false,
      "required": ["or"],
      "properties": {
        "or": {
          "type": "array",
          "minItems": 2,
          "items": {
            "$ref": "#/definitions/condition"
          }
        }
      }
    }
  }
}
