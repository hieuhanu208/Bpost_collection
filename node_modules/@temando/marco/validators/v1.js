const Ajv = require('ajv');
const ajv = new Ajv();

// generics
const metaSchema = require('../resources/schemas/generic/meta+v1.schema.json');
const messageV1Schema = require('../resources/schemas/generic/message+v1.schema.json');
const valueV1Schema = require('../resources/schemas/generic/value+v1.schema.json');
ajv.addSchema(valueV1Schema);
ajv.addSchema(messageV1Schema);
ajv.addSchema(metaSchema);

// marco definition
const marcoSchema = require('../resources/schemas/generic/marco-definition+v1.schema.json');
ajv.addSchema(marcoSchema);

// transform
const transformV1Schema = require('../resources/schemas/generic/transform/transform+v1.schema.json');
ajv.addSchema(transformV1Schema);

// http request
const httpRequestV1Schema = require('../resources/schemas/generic/http-request/http-request+v1.schema.json');
ajv.addSchema(httpRequestV1Schema);

// workflow
const workflowSchema = require('../resources/schemas/generic/workflow/workflow+v1.schema.json');
const stepSchema = require('../resources/schemas/generic/workflow/step+v1.schema.json');
const conditionSchema = require('../resources/schemas/generic/workflow/condition+v1.schema.json');
ajv.addSchema(workflowSchema);
ajv.addSchema(stepSchema);
ajv.addSchema(conditionSchema);

// form
const formV1Schema = require('../resources/schemas/generic/form/form+v1.schema.json');
const formControlSetV1Schema = require('../resources/schemas/generic/form/form-control-set+v1.schema.json');
const formControlV1Schema = require('../resources/schemas/generic/form/form-control+v1.schema.json');
ajv.addSchema(formV1Schema);
ajv.addSchema(formControlV1Schema);
ajv.addSchema(formControlSetV1Schema);

// form controls
const baseFormControl = require('../resources/schemas/generic/form/controls/base-form-control+v1.schema.json');
const choiceControl = require('../resources/schemas/generic/form/controls/choice-form-control+v1.schema.json');
const choicesControl = require('../resources/schemas/generic/form/controls/choices-form-control+v1.schema.json');
const dateControl = require('../resources/schemas/generic/form/controls/date-form-control+v1.schema.json');
const datetimeControl = require('../resources/schemas/generic/form/controls/datetime-form-control+v1.schema.json');
const infoControl = require('../resources/schemas/generic/form/controls/info-form-control+v1.schema.json');
const numberControl = require('../resources/schemas/generic/form/controls/number-form-control+v1.schema.json');
const textControl = require('../resources/schemas/generic/form/controls/text-form-control+v1.schema.json');
ajv.addSchema(baseFormControl);
ajv.addSchema(choiceControl);
ajv.addSchema(choicesControl);
ajv.addSchema(dateControl);
ajv.addSchema(datetimeControl);
ajv.addSchema(infoControl);
ajv.addSchema(numberControl);
ajv.addSchema(textControl);

// form validation rules
const validationRule =
  require('../resources/schemas/generic/form/validation-rules/validation-rule+v1.schema.json');
const validationRuleLength =
  require('../resources/schemas/generic/form/validation-rules/length-rule+v1.schema.json');
const minlengthValidationSchema =
  require('../resources/schemas/generic/form/validation-rules/minimum-length-rule+v1.schema.json');
const exactlengthValidationSchema =
  require('../resources/schemas/generic/form/validation-rules/exact-length-rule+v1.schema.json');
const maxlengthValidationSchema =
  require('../resources/schemas/generic/form/validation-rules/maximum-length-rule+v1.schema.json');
const mustMatchValidationSchema =
  require('../resources/schemas/generic/form/validation-rules/must-match-rule+v1.schema.json');
const requiredValidationSchema =
  require('../resources/schemas/generic/form/validation-rules/required-rule+v1.schema.json');
const numberValidationSchema =
  require('../resources/schemas/generic/form/validation-rules/number-rule+v1.schema.json');
ajv.addSchema(validationRule);
ajv.addSchema(validationRuleLength);
ajv.addSchema(minlengthValidationSchema);
ajv.addSchema(exactlengthValidationSchema);
ajv.addSchema(maxlengthValidationSchema);
ajv.addSchema(minlengthValidationSchema, 'minLengthValidation');
ajv.addSchema(mustMatchValidationSchema);
ajv.addSchema(requiredValidationSchema);
ajv.addSchema(numberValidationSchema);

// form depend
const dependency =
  require('../resources/schemas/generic/form/dependency+v1.schema.json');
const dataSourceSchema =
  require('../resources/schemas/generic/form/data-source+v1.schema.json');
ajv.addSchema(dependency);
ajv.addSchema(dataSourceSchema);

// grid
const grid = require('../resources/schemas/generic/grid/grid+v1.schema.json');
const gridColumn = require('../resources/schemas/generic/grid/grid-column+v1.schema.json');
const gridRowAction = require('../resources/schemas/generic/grid/grid-row-action+v1.schema.json');
ajv.addSchema(grid);
ajv.addSchema(gridColumn);
ajv.addSchema(gridRowAction);

module.exports = ajv;
