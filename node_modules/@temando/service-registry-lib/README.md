# Temando Service Registry Library

A library that allows services to access the Temando Service Registry.

For more information on the Service Registry, see [Platform Services Tome](http://docs.temando.io/platform-services-tome/).

## Installation

To add Service Registry Library as a dependency to your service, run the following command:

```sh
npm install --save @temando/service-registry-lib
```

## Usage

Service Registry Library [provides javascript classes](esdoc.json "esdoc:") for interacting with the Temando Service Registry.

The following example code snippet shows:

- Creating a new Registry object for the Service Registry in the `dev` environment using the `s3` filesystem.
- Accessing the Service Registry's:
    - Key/Value Store
    - Catalog
    - Service Manager.
- Searching the Service Registry using MongoDB style queries with [Sift](https://github.com/crcn/sift.js)

```js
import { Registry } from '@temando/service-registry-lib';

// Initialize a new Registry object
const registry = new Registry('dev', 's3');

// Create handles
const kvStorage = registry.kv();
const catalog = registry.catalog();
const serviceManager = registry.sm();

// List all items in key/value store
console.log(kvStorage.listAll());

// List all catalog entries
console.log(catalog.all());

// Search for catalog entries that have attribute `type` = `carrier-integration`
console.log(catalog.search({
  'definition.attributes.type': {
    $eq: 'carrier-integration',
  },
}));

// Search for catalog entries that have attribute `type` != `carrier-integration`
console.log(catalog.search({
  'definition.attributes.type': {
    $ne: 'carrier-integration',
  },
}));

// Determine if current working directory has local definition file
const definitionExists = serviceManager.isLocalDefinitionExist();
```

## Contributing

See the [Contributors Guide](CONTRIBUTING.md).
